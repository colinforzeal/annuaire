<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">

    <property name="now" value="now()" dbms="mysql"/>

    <changeSet author="colinforzeal" id="1" runAlways="true">
        <dropTable tableName="addresses"/>
        <dropTable tableName="phones"/>
        <dropTable tableName="attachments"/>
        <dropTable tableName="contacts"/>

        <createTable tableName="contacts">
            <column name="id" type="BIGINT" autoIncrement="true">e
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="firstName" type="VARCHAR(32)">
                <constraints nullable="false"/>
            </column>
            <column name="lastName" type="VARCHAR(32)">
                <constraints nullable="false"/>
            </column>
            <column name="middleName" type="VARCHAR(32)">
            </column>
            <column name="dateOfBirth" type="DATE">
            </column>
            <column name="sex" type="VARCHAR(8)">
            </column>
            <column name="citizenship" type="VARCHAR(32)">
            </column>
            <column name="maritalStatus" type="VARCHAR(32)">
            </column>
            <column name="website" type="VARCHAR(32)">
            </column>
            <column name="email" type="VARCHAR(32)">
            </column>
            <column name="placeOfWork" type="VARCHAR(32)">
            </column>
            <column name="photoPath" type="VARCHAR(255)">
            </column>
        </createTable>

        <createTable tableName="addresses">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="contactId" type="BIGINT">
                <constraints nullable="false" foreignKeyName="fk_contact_address_id"
                             references="contacts(id)" deleteCascade="true"/>
            </column>
            <column name="country" type="VARCHAR(32)">
            </column>
            <column name="city" type="VARCHAR(32)">
            </column>
            <column name="address" type="VARCHAR(64)">
            </column>
            <column name="zip" type="INT">
            </column>
        </createTable>

        <createTable tableName="phones">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="contactId" type="BIGINT">
                <constraints nullable="false" foreignKeyName="fk_contact_phone_id"
                             references="contacts(id)" deleteCascade="true"/>
            </column>
            <column name="countryCode" type="INT">
            </column>
            <column name="number" type="INT">
            </column>
            <column name="type" type="VARCHAR(32)">
            </column>
            <column name="comment" type="VARCHAR(128)">
            </column>
        </createTable>

        <createTable tableName="attachments">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="contactId" type="BIGINT">
                <constraints nullable="false" foreignKeyName="fk_contact_attachment_id"
                             references="contacts(id)" deleteCascade="true"/>
            </column>
            <column name="name" type="VARCHAR(64)">
            </column>
            <column name="dateOfUpload" type="DATE">
            </column>
            <column name="comment" type="VARCHAR(128)">
            </column>
            <column name="filePath" type="VARCHAR(255)">
            </column>
        </createTable>

        <insert tableName="contacts">
            <column name="id" value="1"/>
            <column name="firstName" value="Ulad"/>
            <column name="lastName" value="Bondar"/>
            <column name="dateOfBirth" valueComputed="${now}"/>
            <column name="placeOfWork" value="BSUIR"/>
        </insert>

        <insert tableName="contacts">
            <column name="firstName" value="Ivan"/>
            <column name="lastName" value="Sakovich"/>
            <column name="dateOfBirth" valueComputed="${now}"/>
            <column name="placeOfWork" value="MSLU"/>
        </insert>

        <insert tableName="addresses">
            <column name="id" value="1"/>
            <column name="contactId" value="1"/>
            <column name="country" value="BLR"/>
            <column name="city" value="Gomel"/>
            <column name="address" value="some address"/>
            <column name="zip" value="246000"/>
        </insert>

        <insert tableName="phones">
            <column name="id" value="1"/>
            <column name="contactId" value="1"/>
            <column name="countryCode" value="375"/>
            <column name="number" value="29"/>
            <column name="type" value="MOBILE"/>
            <column name="comment" value="some comment"/>
        </insert>

        <insert tableName="phones">
            <column name="id" value="2"/>
            <column name="contactId" value="1"/>
            <column name="countryCode" value="375"/>
            <column name="number" value="33"/>
            <column name="type" value="HOME"/>
            <column name="comment" value="some comment"/>
        </insert>
    </changeSet>

</databaseChangeLog>